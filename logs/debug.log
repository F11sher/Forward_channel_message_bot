2024-10-26T18:17:14.309245+0300 INFO Bot start by Admin:424437376
2024-10-26T18:17:24.086580+0300 ERROR An error has been caught in function 'call', process 'MainProcess' (6840), thread 'MainThread' (6212):
Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 65, in <module>
    asyncio.run(start())
    │       │   └ <function start at 0x0000022C331184C0>
    │       └ <function run at 0x0000022C2A10A5F0>
    └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object start at 0x0000022C330A43C0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022C2A108940>
           └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000022C2A1C91B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022C2A10A3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022C2A075510>
    └ <Handle <TaskStepMethWrapper object at 0x0000022C33135FF0>()>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000022C33135FF0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000022C33135FF0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000022C33135FF0>()>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,)}
                     │    │           │    └ Update(update_id=615609760, message=Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(U...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000022C33106770>
                     │    └ <function Dispatcher.feed_update at 0x0000022C32DEA9E0>
                     └ <Dispatcher '0x22c33107b80'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022C32DE9630>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022C33135930>
                     └ <Dispatcher '0x22c33107b80'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,), 'bot': <aiogra...
                 │       └ Update(update_id=615609760, message=Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000022C33135B10>, functools...

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,), 'bot': <aiogra...
                 │       └ Update(update_id=615609760, message=Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000022C33135B70>, <function TelegramEventObserver...

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,), 'bot': <aiogra...
                 │       └ Update(update_id=615609760, message=Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x0000022C3304DE10>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,), 'bot': <aiogra...
                 │             └ Update(update_id=615609760, message=Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x0000022C3304DEA0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x22c33107b80'>>, Update(update_id=615609760, messa...

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,), 'bot': <aiogra...
                 │    │                           │                  └ Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(UTC)), chat=Chat(id=424437376, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000022C32DEA050>
                 └ <Dispatcher '0x22c33107b80'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,), 'bot': <aiogra...
                 │        │                     │               └ Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(UTC)), chat=Chat(id=424437376, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022C331595A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022C32DE9630>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022C33107D30>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022C32DEA0E0>
                 └ <Dispatcher '0x22c33107b80'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,), 'bot': <aiogra...
                     │        │       └ Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(UTC)), chat=Chat(id=424437376, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000022C32DE9750>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022C33107D30>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,), 'bot': <aiogra...
                 │             └ Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(UTC)), chat=Chat(id=424437376, type='...
                 └ functools.partial(<aiogram.utils.chat_action.ChatActionMiddleware object at 0x0000022C33135C00>, <function CallableObject.cal...

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\utils\chat_action.py", line 379, in __call__
    return await handler(event, data)
                 │       │      └ {'dispatcher': <Dispatcher '0x22c33107b80'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022C33106770>,), 'bot': <aiogra...
                 │       └ Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 15, 17, 23, tzinfo=TzInfo(UTC)), chat=Chat(id=424437376, type='...
                 └ <function CallableObject.call at 0x0000022C33159CF0>

> File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function get_start at 0x0000022C3310B400>, Message(message_id=5676, date=datetime.datetime(2024, 10, 26, 1...

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\core\handlers\basic.py", line 15, in get_start
    current_users = json.load(file)
                    │    │    └ <_io.TextIOWrapper name='users_data.json' mode='r' encoding='cp1251'>
                    │    └ <function load at 0x0000022C31A00D30>
                    └ <module 'json' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\json\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\json\__init__.py", line 293, in load
    return loads(fp.read(),
           │     │  └ <method 'read' of '_io.TextIOWrapper' objects>
           │     └ <_io.TextIOWrapper name='users_data.json' mode='r' encoding='cp1251'>
           └ <function loads at 0x0000022C31A00DC0>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           │                │      └ ''
           │                └ <function JSONDecoder.decode at 0x0000022C31A00670>
           └ <json.decoder.JSONDecoder object at 0x0000022C319C5F00>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               │    │          │      │  └ ''
               │    │          │      └ <built-in method match of re.Pattern object at 0x0000022C319812F0>
               │    │          └ ''
               │    └ <function JSONDecoder.raw_decode at 0x0000022C31A00700>
               └ <json.decoder.JSONDecoder object at 0x0000022C319C5F00>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
          │                                  └ ''
          └ <class 'json.decoder.JSONDecodeError'>

json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2024-10-26T18:17:57.334899+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:17:57.580931+0300 ERROR Bot start error.
2024-10-26T18:19:12.596463+0300 INFO Bot start by Admin:424437376
2024-10-26T18:19:14.146562+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:19:24.571842+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:20:38.710962+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:20:38.971943+0300 ERROR Bot start error.
2024-10-26T18:20:43.227963+0300 INFO Bot start by Admin:424437376
2024-10-26T18:21:28.567650+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:21:28.819654+0300 ERROR Bot start error.
2024-10-26T18:21:32.921681+0300 INFO Bot start by Admin:424437376
2024-10-26T18:21:34.547693+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:22:08.607229+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:22:08.862336+0300 ERROR Bot start error.
2024-10-26T18:22:12.980333+0300 INFO Bot start by Admin:424437376
2024-10-26T18:22:17.396363+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:22:17.663399+0300 ERROR Bot start error.
2024-10-26T18:22:21.767391+0300 INFO Bot start by Admin:424437376
2024-10-26T18:22:24.692915+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:22:46.075028+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:23:36.167959+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:23:36.421966+0300 ERROR Bot start error.
2024-10-26T18:23:40.975992+0300 INFO Bot start by Admin:424437376
2024-10-26T18:23:43.487976+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:24:36.775417+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:24:49.696581+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:24:49.939582+0300 ERROR Bot start error.
2024-10-26T18:24:54.140607+0300 INFO Bot start by Admin:424437376
2024-10-26T18:24:56.276322+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:25:01.239019+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:25:16.615931+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:25:16.865896+0300 ERROR Bot start error.
2024-10-26T18:25:29.626488+0300 INFO Bot start by Admin:424437376
2024-10-26T18:25:31.194497+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:25:33.567767+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:25:36.007782+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:25:57.765040+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:25:58.029051+0300 ERROR Bot start error.
2024-10-26T18:27:00.991483+0300 INFO Bot start by Admin:424437376
2024-10-26T18:27:03.807566+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:27:14.157075+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:27:14.245078+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 1
Пользователи, заблокировавшие бота: 0
2024-10-26T18:27:59.604288+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:27:59.926295+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 1
Пользователи, заблокировавшие бота: 0
2024-10-26T18:28:30.500808+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:28:30.742843+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 1
Пользователи, заблокировавшие бота: 0
2024-10-26T18:29:07.364387+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:29:07.553388+0300 WARNING Пользователь True(424437376) заблокировал бота :(
2024-10-26T18:29:07.553388+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 1
2024-10-26T18:29:16.054591+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:29:16.120591+0300 WARNING Пользователь True(424437376) заблокировал бота :(
2024-10-26T18:29:16.120591+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 1
2024-10-26T18:29:29.357266+0300 ERROR An error has been caught in function 'call', process 'MainProcess' (17764), thread 'MainThread' (5752):
Traceback (most recent call last):

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object start at 0x000001FA85494430>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001FAFC4C8940>
           └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001FAFC5891B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001FAFC4CA3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1871, in _run_once
    event_list = self._selector.select(timeout)
                 │    │         │      └ 6.188000000001921
                 │    │         └ <function IocpProactor.select at 0x000001FAFC589630>
                 │    └ <IocpProactor overlapped#=4 result#=0>
                 └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 444, in select
    self._poll(timeout)
    │    │     └ 6.188000000001921
    │    └ <function IocpProactor._poll at 0x000001FAFC58A0E0>
    └ <IocpProactor overlapped#=4 result#=0>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 797, in _poll
    status = _overlapped.GetQueuedCompletionStatus(self._iocp, ms)
             │           │                         │    │      └ 6189
             │           │                         │    └ 296
             │           │                         └ <IocpProactor overlapped#=4 result#=0>
             │           └ <built-in function GetQueuedCompletionStatus>
             └ <module '_overlapped' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\DLLs\\_overlapped.pyd'>

KeyboardInterrupt


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 543, in start_polling
    done, pending = await asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)
                          │       │    │                  │       └ 'FIRST_COMPLETED'
                          │       │    │                  └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>
                          │       │    └ [<Task cancelled name='Task-5' coro=<Dispatcher._polling() done, defined at C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\l...
                          │       └ <function wait at 0x000001FAFC49B6D0>
                          └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 384, in wait
    return await _wait(fs, timeout, return_when, loop)
                 │     │   │        │            └ <ProactorEventLoop running=True closed=False debug=False>
                 │     │   │        └ 'FIRST_COMPLETED'
                 │     │   └ None
                 │     └ {<Task cancelled name='Task-6' coro=<Event.wait() done, defined at C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\...
                 └ <function _wait at 0x000001FAFC49B880>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 491, in _wait
    await waiter
          └ <Future cancelled>

asyncio.exceptions.CancelledError


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 65, in <module>
    asyncio.run(start())
    │       │   └ <function start at 0x000001FA85508430>
    │       └ <function run at 0x000001FAFC4CA5F0>
    └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 47, in run
    _cancel_all_tasks(loop)
    │                 └ <ProactorEventLoop running=True closed=False debug=False>
    └ <function _cancel_all_tasks at 0x000001FAFC4CA680>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 63, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    │    │                  │     │       └ {<Task cancelled name='Task-6' coro=<Event.wait() done, defined at C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\...
    │    │                  │     └ <function gather at 0x000001FAFC49BD00>
    │    │                  └ <module 'asyncio.tasks' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\tasks.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x000001FAFC4C8940>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001FAFC5891B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001FAFC4CA3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001FAFC435510>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 55, in start
    await dp.start_polling(bot)
          │  │             └ <aiogram.client.bot.Bot object at 0x000001FA854F6920>
          │  └ <function Dispatcher.start_polling at 0x000001FA851CF010>
          └ <Dispatcher '0x1fa854f7ac0'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 556, in start_polling
    await self.emit_shutdown(bot=bots[-1], **workflow_data)
          │    │                 │           └ {'dispatcher': <Dispatcher '0x1fa854f7ac0'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001FA854F6920>,)}
          │    │                 └ (<aiogram.client.bot.Bot object at 0x000001FA854F6920>,)
          │    └ <function Router.emit_shutdown at 0x000001FA851CE560>
          └ <Dispatcher '0x1fa854f7ac0'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 273, in emit_shutdown
    await self.shutdown.trigger(*args, **kwargs)
          │    │        │        │       └ {'bot': <aiogram.client.bot.Bot object at 0x000001FA854F6920>, 'dispatcher': <Dispatcher '0x1fa854f7ac0'>, 'bots': (<aiogram....
          │    │        │        └ ()
          │    │        └ <function EventObserver.trigger at 0x000001FA851CDD80>
          │    └ <aiogram.dispatcher.event.event.EventObserver object at 0x000001FA855257B0>
          └ <Dispatcher '0x1fa854f7ac0'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\event.py", line 42, in trigger
    await handler.call(*args, **kwargs)
          │       │     │       └ {'bot': <aiogram.client.bot.Bot object at 0x000001FA854F6920>, 'dispatcher': <Dispatcher '0x1fa854f7ac0'>, 'bots': (<aiogram....
          │       │     └ ()
          │       └ <function CallableObject.call at 0x000001FA851CC820>
          └ HandlerObject(callback=<function stop_bot at 0x000001FA855080D0>, awaitable=True, params={'bot'}, varkw=False, filters=None, ...

> File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function stop_bot at 0x000001FA855080D0>, bot=<aiogram.client.bot.Bot object at 0x000001FA854F6920>)

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 26, in stop_bot
    await bot.send_message(settings.bots.admin_id, text='Admin message: <b>Бот отключен!</b>')
          │   │            │        │    └ 424437376
          │   │            │        └ Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376)
          │   │            └ Settings(bots=Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376))
          │   └ <function Bot.send_message at 0x000001FA85150B80>
          └ <aiogram.client.bot.Bot object at 0x000001FA854F6920>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 2917, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
                 └ <aiogram.client.bot.Bot object at 0x000001FA854F6920>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 488, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001FA854F6920>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001FA854F74F0>
                 └ <aiogram.client.bot.Bot object at 0x000001FA854F6920>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001FA854F6920>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001FAFC4981F0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001FA851F11B0>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001FA854F74F0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 128, in check_response
    raise TelegramForbiddenError(method=method, message=description)
          │                             │               └ 'Forbidden: bot was blocked by the user'
          │                             └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
          └ <class 'aiogram.exceptions.TelegramForbiddenError'>

aiogram.exceptions.TelegramForbiddenError: Telegram server says - Forbidden: bot was blocked by the user
2024-10-26T18:29:29.641270+0300 ERROR Bot start error.
2024-10-26T18:30:32.893113+0300 ERROR An error has been caught in function 'call', process 'MainProcess' (15636), thread 'MainThread' (17492):
Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 65, in <module>
    asyncio.run(start())
    │       │   └ <function start at 0x00000225012983A0>
    │       └ <function run at 0x0000022577F2A5F0>
    └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object start at 0x0000022501224430>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022577F28940>
           └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000022577FE91B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022577F2A3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022577E95510>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 55, in start
    await dp.start_polling(bot)
          │  │             └ <aiogram.client.bot.Bot object at 0x0000022501286980>
          │  └ <function Dispatcher.start_polling at 0x000002257FC13010>
          └ <Dispatcher '0x22501287b20'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 526, in start_polling
    await self.emit_startup(bot=bots[-1], **workflow_data)
          │    │                │           └ {'dispatcher': <Dispatcher '0x22501287b20'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022501286980>,)}
          │    │                └ (<aiogram.client.bot.Bot object at 0x0000022501286980>,)
          │    └ <function Router.emit_startup at 0x000002257FC124D0>
          └ <Dispatcher '0x22501287b20'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 260, in emit_startup
    await self.startup.trigger(*args, **kwargs)
          │    │       │        │       └ {'bot': <aiogram.client.bot.Bot object at 0x0000022501286980>, 'dispatcher': <Dispatcher '0x22501287b20'>, 'bots': (<aiogram....
          │    │       │        └ ()
          │    │       └ <function EventObserver.trigger at 0x000002257FC11D80>
          │    └ <aiogram.dispatcher.event.event.EventObserver object at 0x00000225012B5840>
          └ <Dispatcher '0x22501287b20'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\event.py", line 42, in trigger
    await handler.call(*args, **kwargs)
          │       │     │       └ {'bot': <aiogram.client.bot.Bot object at 0x0000022501286980>, 'dispatcher': <Dispatcher '0x22501287b20'>, 'bots': (<aiogram....
          │       │     └ ()
          │       └ <function CallableObject.call at 0x000002257FC10820>
          └ HandlerObject(callback=<function start_bot at 0x000002250128B9A0>, awaitable=True, params={'bot'}, varkw=False, filters=None,...

> File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start_bot at 0x000002250128B9A0>, bot=<aiogram.client.bot.Bot object at 0x0000022501286980>)

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 20, in start_bot
    await bot.send_message(settings.bots.admin_id, text='Admin message: <b>Бот запущен!</b> ')
          │   │            │        │    └ 424437376
          │   │            │        └ Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376)
          │   │            └ Settings(bots=Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376))
          │   └ <function Bot.send_message at 0x000002257FC68B80>
          └ <aiogram.client.bot.Bot object at 0x0000022501286980>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 2917, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
                 └ <aiogram.client.bot.Bot object at 0x0000022501286980>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 488, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
                 │    │       └ <aiogram.client.bot.Bot object at 0x0000022501286980>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000022501287550>
                 └ <aiogram.client.bot.Bot object at 0x0000022501286980>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x0000022501286980>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x0000022577EF81F0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000002257FC4D1B0>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000022501287550>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 128, in check_response
    raise TelegramForbiddenError(method=method, message=description)
          │                             │               └ 'Forbidden: bot was blocked by the user'
          │                             └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
          └ <class 'aiogram.exceptions.TelegramForbiddenError'>

aiogram.exceptions.TelegramForbiddenError: Telegram server says - Forbidden: bot was blocked by the user
2024-10-26T18:30:43.792283+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:30:43.979285+0300 WARNING Пользователь True(424437376) заблокировал бота :(
2024-10-26T18:30:43.979285+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 1
2024-10-26T18:31:15.461152+0300 ERROR An error has been caught in function 'call', process 'MainProcess' (15636), thread 'MainThread' (17492):
Traceback (most recent call last):

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object start at 0x0000022501224430>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022577F28940>
           └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000022577FE91B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022577F2A3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1871, in _run_once
    event_list = self._selector.select(timeout)
                 │    │         │      └ 15.296999999998661
                 │    │         └ <function IocpProactor.select at 0x0000022577FE9630>
                 │    └ <IocpProactor overlapped#=3 result#=0>
                 └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 444, in select
    self._poll(timeout)
    │    │     └ 15.296999999998661
    │    └ <function IocpProactor._poll at 0x0000022577FEA0E0>
    └ <IocpProactor overlapped#=3 result#=0>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 797, in _poll
    status = _overlapped.GetQueuedCompletionStatus(self._iocp, ms)
             │           │                         │    │      └ 15297
             │           │                         │    └ 280
             │           │                         └ <IocpProactor overlapped#=3 result#=0>
             │           └ <built-in function GetQueuedCompletionStatus>
             └ <module '_overlapped' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\DLLs\\_overlapped.pyd'>

KeyboardInterrupt


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 543, in start_polling
    done, pending = await asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)
                          │       │    │                  │       └ 'FIRST_COMPLETED'
                          │       │    │                  └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>
                          │       │    └ [<Task cancelled name='Task-5' coro=<Dispatcher._polling() done, defined at C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\l...
                          │       └ <function wait at 0x0000022577EFB6D0>
                          └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 384, in wait
    return await _wait(fs, timeout, return_when, loop)
                 │     │   │        │            └ <ProactorEventLoop running=True closed=False debug=False>
                 │     │   │        └ 'FIRST_COMPLETED'
                 │     │   └ None
                 │     └ {<Task cancelled name='Task-6' coro=<Event.wait() done, defined at C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\...
                 └ <function _wait at 0x0000022577EFB880>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 491, in _wait
    await waiter
          └ <Future cancelled>

asyncio.exceptions.CancelledError


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 65, in <module>
    asyncio.run(start())
    │       │   └ <function start at 0x00000225012983A0>
    │       └ <function run at 0x0000022577F2A5F0>
    └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 47, in run
    _cancel_all_tasks(loop)
    │                 └ <ProactorEventLoop running=True closed=False debug=False>
    └ <function _cancel_all_tasks at 0x0000022577F2A680>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 63, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    │    │                  │     │       └ {<Task cancelled name='Task-6' coro=<Event.wait() done, defined at C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\...
    │    │                  │     └ <function gather at 0x0000022577EFBD00>
    │    │                  └ <module 'asyncio.tasks' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\tasks.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x0000022577F28940>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000022577FE91B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022577F2A3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022577E95510>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 55, in start
    await dp.start_polling(bot)
          │  │             └ <aiogram.client.bot.Bot object at 0x0000022501286980>
          │  └ <function Dispatcher.start_polling at 0x000002257FC13010>
          └ <Dispatcher '0x22501287b20'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 556, in start_polling
    await self.emit_shutdown(bot=bots[-1], **workflow_data)
          │    │                 │           └ {'dispatcher': <Dispatcher '0x22501287b20'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000022501286980>,)}
          │    │                 └ (<aiogram.client.bot.Bot object at 0x0000022501286980>,)
          │    └ <function Router.emit_shutdown at 0x000002257FC12560>
          └ <Dispatcher '0x22501287b20'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 273, in emit_shutdown
    await self.shutdown.trigger(*args, **kwargs)
          │    │        │        │       └ {'bot': <aiogram.client.bot.Bot object at 0x0000022501286980>, 'dispatcher': <Dispatcher '0x22501287b20'>, 'bots': (<aiogram....
          │    │        │        └ ()
          │    │        └ <function EventObserver.trigger at 0x000002257FC11D80>
          │    └ <aiogram.dispatcher.event.event.EventObserver object at 0x00000225012B5810>
          └ <Dispatcher '0x22501287b20'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\event.py", line 42, in trigger
    await handler.call(*args, **kwargs)
          │       │     │       └ {'bot': <aiogram.client.bot.Bot object at 0x0000022501286980>, 'dispatcher': <Dispatcher '0x22501287b20'>, 'bots': (<aiogram....
          │       │     └ ()
          │       └ <function CallableObject.call at 0x000002257FC10820>
          └ HandlerObject(callback=<function stop_bot at 0x0000022501298040>, awaitable=True, params={'bot'}, varkw=False, filters=None, ...

> File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function stop_bot at 0x0000022501298040>, bot=<aiogram.client.bot.Bot object at 0x0000022501286980>)

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 26, in stop_bot
    await bot.send_message(settings.bots.admin_id, text='Admin message: <b>Бот отключен!</b>')
          │   │            │        │    └ 424437376
          │   │            │        └ Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376)
          │   │            └ Settings(bots=Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376))
          │   └ <function Bot.send_message at 0x000002257FC68B80>
          └ <aiogram.client.bot.Bot object at 0x0000022501286980>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 2917, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
                 └ <aiogram.client.bot.Bot object at 0x0000022501286980>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 488, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
                 │    │       └ <aiogram.client.bot.Bot object at 0x0000022501286980>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000022501287550>
                 └ <aiogram.client.bot.Bot object at 0x0000022501286980>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x0000022501286980>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x0000022577EF81F0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000002257FC4D1B0>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000022501287550>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 128, in check_response
    raise TelegramForbiddenError(method=method, message=description)
          │                             │               └ 'Forbidden: bot was blocked by the user'
          │                             └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
          └ <class 'aiogram.exceptions.TelegramForbiddenError'>

aiogram.exceptions.TelegramForbiddenError: Telegram server says - Forbidden: bot was blocked by the user
2024-10-26T18:31:15.728120+0300 ERROR Bot start error.
2024-10-26T18:31:19.903211+0300 ERROR An error has been caught in function 'call', process 'MainProcess' (11540), thread 'MainThread' (2920):
Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 65, in <module>
    asyncio.run(start())
    │       │   └ <function start at 0x00000280ADA38430>
    │       └ <function run at 0x00000280A4A3A5F0>
    └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object start at 0x00000280AD9C44A0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000280A4A38940>
           └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000280A4AE91B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000280A4A3A3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000280A49A5510>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 55, in start
    await dp.start_polling(bot)
          │  │             └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>
          │  └ <function Dispatcher.start_polling at 0x00000280AD6E3010>
          └ <Dispatcher '0x280ada27b50'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 526, in start_polling
    await self.emit_startup(bot=bots[-1], **workflow_data)
          │    │                │           └ {'dispatcher': <Dispatcher '0x280ada27b50'>, 'bots': (<aiogram.client.bot.Bot object at 0x00000280ADA269B0>,)}
          │    │                └ (<aiogram.client.bot.Bot object at 0x00000280ADA269B0>,)
          │    └ <function Router.emit_startup at 0x00000280AD6E24D0>
          └ <Dispatcher '0x280ada27b50'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 260, in emit_startup
    await self.startup.trigger(*args, **kwargs)
          │    │       │        │       └ {'bot': <aiogram.client.bot.Bot object at 0x00000280ADA269B0>, 'dispatcher': <Dispatcher '0x280ada27b50'>, 'bots': (<aiogram....
          │    │       │        └ ()
          │    │       └ <function EventObserver.trigger at 0x00000280AD6E1D80>
          │    └ <aiogram.dispatcher.event.event.EventObserver object at 0x00000280ADA55870>
          └ <Dispatcher '0x280ada27b50'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\event.py", line 42, in trigger
    await handler.call(*args, **kwargs)
          │       │     │       └ {'bot': <aiogram.client.bot.Bot object at 0x00000280ADA269B0>, 'dispatcher': <Dispatcher '0x280ada27b50'>, 'bots': (<aiogram....
          │       │     └ ()
          │       └ <function CallableObject.call at 0x00000280AD6E0820>
          └ HandlerObject(callback=<function start_bot at 0x00000280ADA2BA30>, awaitable=True, params={'bot'}, varkw=False, filters=None,...

> File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start_bot at 0x00000280ADA2BA30>, bot=<aiogram.client.bot.Bot object at 0x00000280ADA269B0>)

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 20, in start_bot
    await bot.send_message(settings.bots.admin_id, text='Admin message: <b>Бот запущен!</b> ')
          │   │            │        │    └ 424437376
          │   │            │        └ Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376)
          │   │            └ Settings(bots=Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376))
          │   └ <function Bot.send_message at 0x00000280AD6F4B80>
          └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 2917, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
                 └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 488, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000280ADA27580>
                 └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000280A4A081F0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000280AD6AD1B0>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000280ADA27580>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 128, in check_response
    raise TelegramForbiddenError(method=method, message=description)
          │                             │               └ 'Forbidden: bot was blocked by the user'
          │                             └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
          └ <class 'aiogram.exceptions.TelegramForbiddenError'>

aiogram.exceptions.TelegramForbiddenError: Telegram server says - Forbidden: bot was blocked by the user
2024-10-26T18:31:21.820239+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:31:22.006244+0300 WARNING Пользователь True(424437376) заблокировал бота :(
2024-10-26T18:31:22.006244+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 1
2024-10-26T18:31:30.029321+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:31:30.100357+0300 WARNING Пользователь True(424437376) заблокировал бота :(
2024-10-26T18:31:30.101354+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 1
2024-10-26T18:31:34.382417+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:31:34.455413+0300 WARNING Пользователь True(424437376) заблокировал бота :(
2024-10-26T18:31:34.455413+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 1
2024-10-26T18:31:36.171440+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:31:36.247405+0300 WARNING Пользователь True(424437376) заблокировал бота :(
2024-10-26T18:31:36.247405+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 1
2024-10-26T18:32:07.113536+0300 ERROR An error has been caught in function 'call', process 'MainProcess' (11540), thread 'MainThread' (2920):
Traceback (most recent call last):

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object start at 0x00000280AD9C44A0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000280A4A38940>
           └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000280A4AE91B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000280A4A3A3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1871, in _run_once
    event_list = self._selector.select(timeout)
                 │    │         │      └ 15.93800000000192
                 │    │         └ <function IocpProactor.select at 0x00000280A4AE9630>
                 │    └ <IocpProactor overlapped#=3 result#=0>
                 └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 444, in select
    self._poll(timeout)
    │    │     └ 15.93800000000192
    │    └ <function IocpProactor._poll at 0x00000280A4AEA0E0>
    └ <IocpProactor overlapped#=3 result#=0>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 797, in _poll
    status = _overlapped.GetQueuedCompletionStatus(self._iocp, ms)
             │           │                         │    │      └ 15939
             │           │                         │    └ 280
             │           │                         └ <IocpProactor overlapped#=3 result#=0>
             │           └ <built-in function GetQueuedCompletionStatus>
             └ <module '_overlapped' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\DLLs\\_overlapped.pyd'>

KeyboardInterrupt


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 543, in start_polling
    done, pending = await asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)
                          │       │    │                  │       └ 'FIRST_COMPLETED'
                          │       │    │                  └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>
                          │       │    └ [<Task cancelled name='Task-5' coro=<Dispatcher._polling() done, defined at C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\l...
                          │       └ <function wait at 0x00000280A4A0B6D0>
                          └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 384, in wait
    return await _wait(fs, timeout, return_when, loop)
                 │     │   │        │            └ <ProactorEventLoop running=True closed=False debug=False>
                 │     │   │        └ 'FIRST_COMPLETED'
                 │     │   └ None
                 │     └ {<Task cancelled name='Task-6' coro=<Event.wait() done, defined at C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\...
                 └ <function _wait at 0x00000280A4A0B880>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 491, in _wait
    await waiter
          └ <Future cancelled>

asyncio.exceptions.CancelledError


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 65, in <module>
    asyncio.run(start())
    │       │   └ <function start at 0x00000280ADA38430>
    │       └ <function run at 0x00000280A4A3A5F0>
    └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 47, in run
    _cancel_all_tasks(loop)
    │                 └ <ProactorEventLoop running=True closed=False debug=False>
    └ <function _cancel_all_tasks at 0x00000280A4A3A680>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 63, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    │    │                  │     │       └ {<Task cancelled name='Task-6' coro=<Event.wait() done, defined at C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\...
    │    │                  │     └ <function gather at 0x00000280A4A0BD00>
    │    │                  └ <module 'asyncio.tasks' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\tasks.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x00000280A4A38940>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000280A4AE91B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000280A4A3A3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000280A49A5510>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 55, in start
    await dp.start_polling(bot)
          │  │             └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>
          │  └ <function Dispatcher.start_polling at 0x00000280AD6E3010>
          └ <Dispatcher '0x280ada27b50'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 556, in start_polling
    await self.emit_shutdown(bot=bots[-1], **workflow_data)
          │    │                 │           └ {'dispatcher': <Dispatcher '0x280ada27b50'>, 'bots': (<aiogram.client.bot.Bot object at 0x00000280ADA269B0>,)}
          │    │                 └ (<aiogram.client.bot.Bot object at 0x00000280ADA269B0>,)
          │    └ <function Router.emit_shutdown at 0x00000280AD6E2560>
          └ <Dispatcher '0x280ada27b50'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 273, in emit_shutdown
    await self.shutdown.trigger(*args, **kwargs)
          │    │        │        │       └ {'bot': <aiogram.client.bot.Bot object at 0x00000280ADA269B0>, 'dispatcher': <Dispatcher '0x280ada27b50'>, 'bots': (<aiogram....
          │    │        │        └ ()
          │    │        └ <function EventObserver.trigger at 0x00000280AD6E1D80>
          │    └ <aiogram.dispatcher.event.event.EventObserver object at 0x00000280ADA55840>
          └ <Dispatcher '0x280ada27b50'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\event.py", line 42, in trigger
    await handler.call(*args, **kwargs)
          │       │     │       └ {'bot': <aiogram.client.bot.Bot object at 0x00000280ADA269B0>, 'dispatcher': <Dispatcher '0x280ada27b50'>, 'bots': (<aiogram....
          │       │     └ ()
          │       └ <function CallableObject.call at 0x00000280AD6E0820>
          └ HandlerObject(callback=<function stop_bot at 0x00000280ADA380D0>, awaitable=True, params={'bot'}, varkw=False, filters=None, ...

> File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function stop_bot at 0x00000280ADA380D0>, bot=<aiogram.client.bot.Bot object at 0x00000280ADA269B0>)

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 26, in stop_bot
    await bot.send_message(settings.bots.admin_id, text='Admin message: <b>Бот отключен!</b>')
          │   │            │        │    └ 424437376
          │   │            │        └ Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376)
          │   │            └ Settings(bots=Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376))
          │   └ <function Bot.send_message at 0x00000280AD6F4B80>
          └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 2917, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
                 └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 488, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000280ADA27580>
                 └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000280ADA269B0>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000280A4A081F0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000280AD6AD1B0>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000280ADA27580>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 128, in check_response
    raise TelegramForbiddenError(method=method, message=description)
          │                             │               └ 'Forbidden: bot was blocked by the user'
          │                             └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
          └ <class 'aiogram.exceptions.TelegramForbiddenError'>

aiogram.exceptions.TelegramForbiddenError: Telegram server says - Forbidden: bot was blocked by the user
2024-10-26T18:32:07.386541+0300 ERROR Bot start error.
2024-10-26T18:32:11.598592+0300 ERROR An error has been caught in function 'call', process 'MainProcess' (18120), thread 'MainThread' (16904):
Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 65, in <module>
    asyncio.run(start())
    │       │   └ <function start at 0x0000020389EA83A0>
    │       └ <function run at 0x00000203FFAAA5F0>
    └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object start at 0x0000020389E344A0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000203FFAA8940>
           └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000203FFB591B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000203FFAAA3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000203FFA15510>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 55, in start
    await dp.start_polling(bot)
          │  │             └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>
          │  └ <function Dispatcher.start_polling at 0x0000020389B53010>
          └ <Dispatcher '0x20389e97be0'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 526, in start_polling
    await self.emit_startup(bot=bots[-1], **workflow_data)
          │    │                │           └ {'dispatcher': <Dispatcher '0x20389e97be0'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000020389E96A40>,)}
          │    │                └ (<aiogram.client.bot.Bot object at 0x0000020389E96A40>,)
          │    └ <function Router.emit_startup at 0x0000020389B524D0>
          └ <Dispatcher '0x20389e97be0'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 260, in emit_startup
    await self.startup.trigger(*args, **kwargs)
          │    │       │        │       └ {'bot': <aiogram.client.bot.Bot object at 0x0000020389E96A40>, 'dispatcher': <Dispatcher '0x20389e97be0'>, 'bots': (<aiogram....
          │    │       │        └ ()
          │    │       └ <function EventObserver.trigger at 0x0000020389B51D80>
          │    └ <aiogram.dispatcher.event.event.EventObserver object at 0x0000020389EC5900>
          └ <Dispatcher '0x20389e97be0'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\event.py", line 42, in trigger
    await handler.call(*args, **kwargs)
          │       │     │       └ {'bot': <aiogram.client.bot.Bot object at 0x0000020389E96A40>, 'dispatcher': <Dispatcher '0x20389e97be0'>, 'bots': (<aiogram....
          │       │     └ ()
          │       └ <function CallableObject.call at 0x0000020389B50820>
          └ HandlerObject(callback=<function start_bot at 0x0000020389E9B9A0>, awaitable=True, params={'bot'}, varkw=False, filters=None,...

> File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start_bot at 0x0000020389E9B9A0>, bot=<aiogram.client.bot.Bot object at 0x0000020389E96A40>)

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 20, in start_bot
    await bot.send_message(settings.bots.admin_id, text='Admin message: <b>Бот запущен!</b> ')
          │   │            │        │    └ 424437376
          │   │            │        └ Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376)
          │   │            └ Settings(bots=Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376))
          │   └ <function Bot.send_message at 0x0000020389B24B80>
          └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 2917, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
                 └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 488, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
                 │    │       └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000020389E97610>
                 └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000203FFA781F0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x0000020389AF11B0>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000020389E97610>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 128, in check_response
    raise TelegramForbiddenError(method=method, message=description)
          │                             │               └ 'Forbidden: bot was blocked by the user'
          │                             └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
          └ <class 'aiogram.exceptions.TelegramForbiddenError'>

aiogram.exceptions.TelegramForbiddenError: Telegram server says - Forbidden: bot was blocked by the user
2024-10-26T18:32:19.957696+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:32:20.216699+0300 WARNING Пользователь True(424437376) заблокировал бота :(
2024-10-26T18:32:20.216699+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 1
2024-10-26T18:32:25.801801+0300 DEBUG Получено новое сообщение в группе!
2024-10-26T18:32:25.802768+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 0
2024-10-26T18:32:35.405850+0300 ERROR An error has been caught in function 'call', process 'MainProcess' (18120), thread 'MainThread' (16904):
Traceback (most recent call last):

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object start at 0x0000020389E344A0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000203FFAA8940>
           └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000203FFB591B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000203FFAAA3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1871, in _run_once
    event_list = self._selector.select(timeout)
                 │    │         │      └ 15.985000000000582
                 │    │         └ <function IocpProactor.select at 0x00000203FFB59630>
                 │    └ <IocpProactor overlapped#=4 result#=0>
                 └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 444, in select
    self._poll(timeout)
    │    │     └ 15.985000000000582
    │    └ <function IocpProactor._poll at 0x00000203FFB5A0E0>
    └ <IocpProactor overlapped#=4 result#=0>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 797, in _poll
    status = _overlapped.GetQueuedCompletionStatus(self._iocp, ms)
             │           │                         │    │      └ 15986
             │           │                         │    └ 296
             │           │                         └ <IocpProactor overlapped#=4 result#=0>
             │           └ <built-in function GetQueuedCompletionStatus>
             └ <module '_overlapped' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\DLLs\\_overlapped.pyd'>

KeyboardInterrupt


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 543, in start_polling
    done, pending = await asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)
                          │       │    │                  │       └ 'FIRST_COMPLETED'
                          │       │    │                  └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>
                          │       │    └ [<Task cancelled name='Task-5' coro=<Dispatcher._polling() done, defined at C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\l...
                          │       └ <function wait at 0x00000203FFA7B6D0>
                          └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 384, in wait
    return await _wait(fs, timeout, return_when, loop)
                 │     │   │        │            └ <ProactorEventLoop running=True closed=False debug=False>
                 │     │   │        └ 'FIRST_COMPLETED'
                 │     │   └ None
                 │     └ {<Task cancelled name='Task-6' coro=<Event.wait() done, defined at C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\...
                 └ <function _wait at 0x00000203FFA7B880>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 491, in _wait
    await waiter
          └ <Future cancelled>

asyncio.exceptions.CancelledError


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 65, in <module>
    asyncio.run(start())
    │       │   └ <function start at 0x0000020389EA83A0>
    │       └ <function run at 0x00000203FFAAA5F0>
    └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 47, in run
    _cancel_all_tasks(loop)
    │                 └ <ProactorEventLoop running=True closed=False debug=False>
    └ <function _cancel_all_tasks at 0x00000203FFAAA680>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 63, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    │    │                  │     │       └ {<Task cancelled name='Task-6' coro=<Event.wait() done, defined at C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\...
    │    │                  │     └ <function gather at 0x00000203FFA7BD00>
    │    │                  └ <module 'asyncio.tasks' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\tasks.py'>
    │    └ <function BaseEventLoop.run_until_complete at 0x00000203FFAA8940>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000203FFB591B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000203FFAAA3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000203FFA15510>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 55, in start
    await dp.start_polling(bot)
          │  │             └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>
          │  └ <function Dispatcher.start_polling at 0x0000020389B53010>
          └ <Dispatcher '0x20389e97be0'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 556, in start_polling
    await self.emit_shutdown(bot=bots[-1], **workflow_data)
          │    │                 │           └ {'dispatcher': <Dispatcher '0x20389e97be0'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000020389E96A40>,)}
          │    │                 └ (<aiogram.client.bot.Bot object at 0x0000020389E96A40>,)
          │    └ <function Router.emit_shutdown at 0x0000020389B52560>
          └ <Dispatcher '0x20389e97be0'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 273, in emit_shutdown
    await self.shutdown.trigger(*args, **kwargs)
          │    │        │        │       └ {'bot': <aiogram.client.bot.Bot object at 0x0000020389E96A40>, 'dispatcher': <Dispatcher '0x20389e97be0'>, 'bots': (<aiogram....
          │    │        │        └ ()
          │    │        └ <function EventObserver.trigger at 0x0000020389B51D80>
          │    └ <aiogram.dispatcher.event.event.EventObserver object at 0x0000020389EC58D0>
          └ <Dispatcher '0x20389e97be0'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\event.py", line 42, in trigger
    await handler.call(*args, **kwargs)
          │       │     │       └ {'bot': <aiogram.client.bot.Bot object at 0x0000020389E96A40>, 'dispatcher': <Dispatcher '0x20389e97be0'>, 'bots': (<aiogram....
          │       │     └ ()
          │       └ <function CallableObject.call at 0x0000020389B50820>
          └ HandlerObject(callback=<function stop_bot at 0x0000020389EA8040>, awaitable=True, params={'bot'}, varkw=False, filters=None, ...

> File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function stop_bot at 0x0000020389EA8040>, bot=<aiogram.client.bot.Bot object at 0x0000020389E96A40>)

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 26, in stop_bot
    await bot.send_message(settings.bots.admin_id, text='Admin message: <b>Бот отключен!</b>')
          │   │            │        │    └ 424437376
          │   │            │        └ Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376)
          │   │            └ Settings(bots=Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376))
          │   └ <function Bot.send_message at 0x0000020389B24B80>
          └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 2917, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
                 └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 488, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
                 │    │       └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000020389E97610>
                 └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x0000020389E96A40>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000203FFA781F0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x0000020389AF11B0>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000020389E97610>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 128, in check_response
    raise TelegramForbiddenError(method=method, message=description)
          │                             │               └ 'Forbidden: bot was blocked by the user'
          │                             └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот отключен!</b>', business_connection_id=None, message_thread_id=Non...
          └ <class 'aiogram.exceptions.TelegramForbiddenError'>

aiogram.exceptions.TelegramForbiddenError: Telegram server says - Forbidden: bot was blocked by the user
2024-10-26T18:32:35.678857+0300 ERROR Bot start error.
2024-10-26T18:41:31.774748+0300 ERROR An error has been caught in function 'call', process 'MainProcess' (6832), thread 'MainThread' (13404):
Traceback (most recent call last):

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 65, in <module>
    asyncio.run(start())
    │       │   └ <function start at 0x000001CBF9D983A0>
    │       └ <function run at 0x000001CBF0DCA5F0>
    └ <module 'asyncio' from 'C:\\Users\\KliminRG\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object start at 0x000001CBF9D244A0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001CBF0DC8940>
           └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001CBF0E791B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CBF0DCA3B0>
    └ <ProactorEventLoop running=True closed=False debug=False>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CBF0D35510>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 55, in start
    await dp.start_polling(bot)
          │  │             └ <aiogram.client.bot.Bot object at 0x000001CBF9D86980>
          │  └ <function Dispatcher.start_polling at 0x000001CBF99F7010>
          └ <Dispatcher '0x1cbf9d87b20'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\dispatcher.py", line 526, in start_polling
    await self.emit_startup(bot=bots[-1], **workflow_data)
          │    │                │           └ {'dispatcher': <Dispatcher '0x1cbf9d87b20'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001CBF9D86980>,)}
          │    │                └ (<aiogram.client.bot.Bot object at 0x000001CBF9D86980>,)
          │    └ <function Router.emit_startup at 0x000001CBF99F64D0>
          └ <Dispatcher '0x1cbf9d87b20'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\router.py", line 260, in emit_startup
    await self.startup.trigger(*args, **kwargs)
          │    │       │        │       └ {'bot': <aiogram.client.bot.Bot object at 0x000001CBF9D86980>, 'dispatcher': <Dispatcher '0x1cbf9d87b20'>, 'bots': (<aiogram....
          │    │       │        └ ()
          │    │       └ <function EventObserver.trigger at 0x000001CBF99F5D80>
          │    └ <aiogram.dispatcher.event.event.EventObserver object at 0x000001CBF9DB5840>
          └ <Dispatcher '0x1cbf9d87b20'>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\event.py", line 42, in trigger
    await handler.call(*args, **kwargs)
          │       │     │       └ {'bot': <aiogram.client.bot.Bot object at 0x000001CBF9D86980>, 'dispatcher': <Dispatcher '0x1cbf9d87b20'>, 'bots': (<aiogram....
          │       │     └ ()
          │       └ <function CallableObject.call at 0x000001CBF99F4820>
          └ HandlerObject(callback=<function start_bot at 0x000001CBF9D8B9A0>, awaitable=True, params={'bot'}, varkw=False, filters=None,...

> File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start_bot at 0x000001CBF9D8B9A0>, bot=<aiogram.client.bot.Bot object at 0x000001CBF9D86980>)

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\main.py", line 20, in start_bot
    await bot.send_message(settings.bots.admin_id, text='Admin message: <b>Бот запущен!</b> ')
          │   │            │        │    └ 424437376
          │   │            │        └ Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376)
          │   │            └ Settings(bots=Bots(bot_token='6464236701:AAFLhF4c7pnDc9w4xVC7g9Iz-_3rjFC0SGI', admin_id=424437376))
          │   └ <function Bot.send_message at 0x000001CBF9A48B80>
          └ <aiogram.client.bot.Bot object at 0x000001CBF9D86980>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 2917, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
                 └ <aiogram.client.bot.Bot object at 0x000001CBF9D86980>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\bot.py", line 488, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001CBF9D86980>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001CBF9D87550>
                 └ <aiogram.client.bot.Bot object at 0x000001CBF9D86980>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001CBF9D86980>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001CBF0D981F0>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001CBF9A291B0>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001CBF9D87550>

  File "C:\Users\KliminRG\Desktop\Bots\Mailing_bot\venv\lib\site-packages\aiogram\client\session\base.py", line 128, in check_response
    raise TelegramForbiddenError(method=method, message=description)
          │                             │               └ 'Forbidden: bot was blocked by the user'
          │                             └ SendMessage(chat_id=424437376, text='Admin message: <b>Бот запущен!</b> ', business_connection_id=None, message_thread_id=Non...
          └ <class 'aiogram.exceptions.TelegramForbiddenError'>

aiogram.exceptions.TelegramForbiddenError: Telegram server says - Forbidden: bot was blocked by the user
2024-10-26T18:41:31.972749+0300 DEBUG Получено новое сообщение в группе: None(-4103168075)
2024-10-26T18:41:31.973750+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 0
Пользователи, заблокировавшие бота: 0
2024-10-26T18:43:09.176759+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:43:09.437193+0300 ERROR Bot start error.
2024-10-26T18:43:13.806860+0300 INFO Bot start by Admin:424437376
2024-10-26T18:43:14.469344+0300 INFO Новый пользователь подписан на рассылку: F1sher_r(424437376)
2024-10-26T18:49:16.883182+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:49:17.148183+0300 ERROR Bot start error.
2024-10-26T18:49:21.735533+0300 INFO Bot start by Admin:424437376
2024-10-26T18:50:17.347258+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:50:17.600359+0300 ERROR Bot start error.
2024-10-26T18:54:17.114545+0300 INFO Bot start by Admin:424437376
2024-10-26T18:54:26.116347+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:54:26.383350+0300 ERROR Bot start error.
2024-10-26T18:56:47.392950+0300 INFO Bot start by Admin:424437376
2024-10-26T18:59:50.037938+0300 INFO Bot stop by Admin:424437376
2024-10-26T18:59:50.286973+0300 ERROR Bot start error.
2024-10-26T19:04:51.932813+0300 INFO Bot start by Admin:424437376
2024-10-26T19:05:00.408277+0300 DEBUG Получено новое сообщение в группе: test123456test_r(-1002290641730)
2024-10-26T19:05:00.636310+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 1
Пользователи, заблокировавшие бота: 0
2024-10-26T19:05:38.533185+0300 INFO Bot stop by Admin:424437376
2024-10-26T19:05:38.803219+0300 ERROR Bot start error.
2024-10-26T19:05:43.126274+0300 INFO Bot start by Admin:424437376
2024-10-26T19:07:14.968279+0300 INFO Bot stop by Admin:424437376
2024-10-26T19:07:15.227313+0300 ERROR Bot start error.
2024-10-26T19:07:19.380356+0300 INFO Bot start by Admin:424437376
2024-10-26T19:07:35.149753+0300 DEBUG Получено новое сообщение в группе: test123456test_r(-1002290641730)(<class 'int'>)
2024-10-26T19:07:35.367756+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 1
Пользователи, заблокировавшие бота: 0
2024-10-26T19:07:45.332827+0300 INFO Bot stop by Admin:424437376
2024-10-26T19:07:45.595830+0300 ERROR Bot start error.
2024-10-26T19:07:49.831903+0300 INFO Bot start by Admin:424437376
2024-10-26T19:07:53.147904+0300 DEBUG Получено новое сообщение в группе: test123456test_r(-1002290641730)(<class 'int'>)
2024-10-26T19:07:53.409936+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 1
Пользователи, заблокировавшие бота: 0
2024-10-26T19:08:15.849505+0300 DEBUG Получено новое сообщение в группе: test123456test_r(-1002290641730)(<class 'int'>)
2024-10-26T19:08:16.249485+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 1
Пользователи, заблокировавшие бота: 0
2024-10-26T19:08:29.989350+0300 DEBUG Получено новое сообщение в группе: test123456test_r(-1002290641730)(<class 'int'>)
2024-10-26T19:08:29.990350+0300 DEBUG Получено новое сообщение в группе: test123456test_r(-1002290641730)(<class 'int'>)
2024-10-26T19:08:30.194352+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 1
Пользователи, заблокировавшие бота: 0
2024-10-26T19:08:30.298354+0300 DEBUG Рассылка завершена! Результат:
Успешных пересылок: 1
Пользователи, заблокировавшие бота: 0
2024-10-26T19:08:42.990072+0300 INFO Bot stop by Admin:424437376
2024-10-26T19:08:43.251107+0300 ERROR Bot start error.
